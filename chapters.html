<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç« èŠ‚å›çœ‹ - åƒç¥ä¸‡ç‹ï¼šå› æœèºæ—‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" href="assets/icon/icon.svg">
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;500;700&family=ZCOOL+XiaoWei&family=Ma+Shan+Zheng&display=swap"
        rel="stylesheet">
    <style>
        /* ç« èŠ‚é¡µé¢ç‰¹å®šæ ·å¼ */
        #chapters-screen {
            position: absolute;
            inset: 0;
            z-index: 100;
            display: flex;
            flex-direction: column;
            padding: 60px 10%;
            background: linear-gradient(135deg, rgba(10,10,15,0.98) 0%, rgba(20,20,30,0.95) 100%);
            overflow-y: auto;
        }

        .chapters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(226, 192, 141, 0.3);
        }

        .chapters-title {
            font-family: var(--font-art);
            font-size: 3rem;
            color: #fff;
            letter-spacing: 0.5rem;
            text-shadow: 0 0 30px rgba(226, 192, 141, 0.3);
        }

        .back-btn {
            font-size: 1rem;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            padding: 10px 30px;
            border: 1px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            letter-spacing: 0.2rem;
        }

        .back-btn:hover {
            background: var(--theme-gold);
            color: #000;
            border-color: var(--theme-gold);
        }

        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            padding-bottom: 4rem;
        }

        .chapter-card {
            position: relative;
            padding: 2rem;
            background: rgba(20, 20, 25, 0.6);
            border: 1px solid rgba(226, 192, 141, 0.15);
            border-left: 4px solid rgba(226, 192, 141, 0.3);
            transition: all 0.4s ease;
            cursor: pointer;
            overflow: hidden;
        }

        .chapter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, var(--theme-gold) 0%, transparent 100%);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .chapter-card:hover::before {
            opacity: 1;
        }

        .chapter-card:hover {
            background: rgba(30, 30, 40, 0.8);
            border-color: rgba(226, 192, 141, 0.4);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .chapter-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(0.8);
        }

        .chapter-card.locked:hover {
            transform: none;
            background: rgba(20, 20, 25, 0.6);
            border-color: rgba(226, 192, 141, 0.15);
            box-shadow: none;
        }

        .chapter-number {
            font-family: var(--font-art);
            font-size: 0.9rem;
            color: var(--theme-gold);
            letter-spacing: 0.2rem;
            margin-bottom: 0.5rem;
            opacity: 0.8;
        }

        .chapter-name {
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 1rem;
            letter-spacing: 0.1rem;
        }

        .chapter-desc {
            font-size: 0.95rem;
            color: rgba(255,255,255,0.6);
            line-height: 1.8;
        }

        .chapter-status {
            position: absolute;
            top: 2rem;
            right: 2rem;
            font-size: 0.8rem;
            padding: 5px 15px;
            border-radius: 2px;
            letter-spacing: 0.1rem;
        }

        .chapter-status.unlocked {
            background: rgba(94, 251, 110, 0.15);
            color: #5efb6e;
            border: 1px solid rgba(94, 251, 110, 0.3);
        }

        .chapter-status.locked {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255,255,255,0.4);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .progress-info {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-text {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.5);
        }

        .progress-bar {
            width: 100px;
            height: 3px;
            background: rgba(255,255,255,0.1);
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--theme-gold);
            transition: width 0.5s ease;
        }

        .empty-state {
            text-align: center;
            padding: 6rem 2rem;
            color: rgba(255,255,255,0.5);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 2rem;
            opacity: 0.3;
        }

        .empty-state-text {
            font-size: 1.2rem;
            letter-spacing: 0.2rem;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        #chapters-screen::-webkit-scrollbar {
            width: 6px;
        }

        #chapters-screen::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
        }

        #chapters-screen::-webkit-scrollbar-thumb {
            background: rgba(226, 192, 141, 0.3);
            border-radius: 3px;
        }

        #chapters-screen::-webkit-scrollbar-thumb:hover {
            background: rgba(226, 192, 141, 0.5);
        }

        .noise {
            position: fixed;
            inset: 0;
            opacity: 0.03;
            pointer-events: none;
            z-index: 999;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }
    </style>
</head>

<body>
    <div class="noise"></div>
    
    <div id="chapters-screen">
        <div class="chapters-header">
            <h1 class="chapters-title">ç« èŠ‚å›çœ‹</h1>
            <div class="back-btn" onclick="goBack()">è¿”å›ä¸»èœå•</div>
        </div>

        <div class="chapters-grid" id="chapters-grid">
            <!-- ç« èŠ‚å¡ç‰‡å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <script>
        // ç« èŠ‚å®šä¹‰
        const CHAPTERS = [
            { id: 'intro', number: 'åºç« ', name: 'ä¸¤åº§è¢«ä¸–ç•Œé—å¿˜çš„å­¤å²›', desc: 'é«˜äºŒCç­çš„è§’è½ï¼Œä¸¤ä¸ªå­¤ç‹¬çš„çµé­‚é¦–æ¬¡ç›¸é‡ã€‚ä¸€ä¸ªæ˜¯ç”¨å¹»æƒ³æ­¦è£…è‡ªå·±çš„"å…‰æš—ç¥ç‹"ï¼Œå¦ä¸€ä¸ªæ˜¯åœ¨é˜´å½±ä¸­å¯»æ‰¾å…‰æ˜çš„"å¾€æ˜”."ã€‚' },
            { id: 'first_encounter', number: 'ç¬¬ä¸€å¹•', name: 'é˜²å¾¡æœºåˆ¶çš„å¤±æ•ˆ', desc: 'å›¾ä¹¦é¦†æ—§ä¹¦åº“çš„æ„å¤–ç›¸é‡ï¼Œè®©å…‰æš—ç¥ç‹çš„"åœ£åŸŸ"é­é‡äº†å‰æ‰€æœªæœ‰çš„å±æœºã€‚ç»·å¸¦å‹¾ä½çš„ä¸ä»…æ˜¯ä¹¦æ¶ï¼Œæ›´æ˜¯ä¸¤é¢—é€æ¸é è¿‘çš„å¿ƒã€‚' },
            { id: 'transition_bond_1', number: 'ç¬¬äºŒå¹•', name: 'å¤©å°çš„å¯¹è¯', desc: 'åˆåçš„å¤©å°ï¼Œé£å¸¦æ¥äº†å…¬å¹³ã€‚ä¸¤ä¸ªå­¤ç‹¬è€…å¼€å§‹åˆ†äº«å½¼æ­¤çš„ç§˜å¯†ï¼Œåœ¨å¥å·ä¸å¹»æƒ³ä¹‹é—´å¯»æ‰¾å…±é¸£ã€‚' },
            { id: 'corridor_scene', number: 'ç¬¬ä¸‰å¹•', name: 'é»„æ˜é•¿å»Š', desc: 'å¤•é˜³åœ¨èµ°å»Šå°½å¤´å †ç§¯ï¼Œåƒä¸€åœºæ— å£°çš„ç«ç¾ã€‚è¤ç«è™«èˆ¬å¾®å¼±çš„å…‰èŠ’ï¼Œç…§äº®äº†å½¼æ­¤å›å®¶çš„è·¯ã€‚' },
            { id: 'scene_conclusion', number: 'ç¬¬ä¸€ç« ', name: 'å­¤ç‹¬è€…çš„å…±é¸£', desc: 'ã€ç¬¬ä¸€ç« Â·å®Œç»“ã€‘ä¸–ç•Œå¥½åƒçœŸçš„è¢«ç¼è¡¥å¥½äº†ä¸€ç‚¹ç‚¹ã€‚å·¦æ‰‹è¿˜æ®‹ç•™ç€å¾®å‡‰çš„è§¦æ„Ÿï¼Œé‚£æ˜¯æ¯”è™šç©ºæ›´çœŸå®çš„æ¸©æš–ã€‚' },
            { id: 'chapter2_start', number: 'ç¬¬äºŒç« ', name: 'äº¤é”™çš„å› æœçº¿', desc: 'å‘¨ä¸€æ—©æ™¨çš„æ•™å®¤ï¼Œå¾€æ˜”.å‘ç°äº†å…³äº"è™šç©º"ä¼ è¯´çš„å¤ç±ã€‚æ”¾å­¦åå›¾ä¹¦é¦†çš„çº¦å®šï¼Œå¼€å¯äº†ä¸€æ®µå…¨æ–°çš„å†’é™©ã€‚' },
            { id: 'chapter2_climax', number: 'ç¬¬äºŒç« ', name: 'å› æœçš„äº¤ç»‡', desc: 'ã€ç¬¬äºŒç« Â·å®Œç»“ã€‘é»‘æš—æ¶ˆæ•£ï¼Œæœˆå…‰æ´’åœ¨åœ°ä¸Šã€‚æˆ‘ä»¬å¹¶è‚©è€Œè¡Œçš„å½±å­ï¼Œè¯æ˜äº†å½¼æ­¤ä¸å†å­¤å•ã€‚' },
            { id: 'chapter3_start', number: 'ç¬¬ä¸‰ç« ', name: 'è™šç©ºçš„çœŸç›¸', desc: 'å¤ç±æœ€åä¸€é¡µçš„åœ°å›¾æŒ‡å‘å­¦æ ¡åœ°ä¸‹å®¤ã€‚å‘¨å››æ”¾å­¦åçš„æ¢ç´¢ï¼Œå°†æ­ç¤ºå…³äºè™šç©ºä¸å› æœä¹‹æ ¸çš„æƒŠäººç§˜å¯†ã€‚' },
            { id: 'chapter3_climax', number: 'ç¬¬ä¸‰ç« ', name: 'çœŸç›¸å¤§ç™½', desc: 'ã€ç¬¬ä¸‰ç« Â·å®Œç»“ã€‘çˆ·çˆ·çš„å½±åƒæ­ç¤ºäº†è™šç©ºçš„æœ¬è´¨ã€‚åŸæ¥ï¼Œæˆ‘ä¸€ç›´å¯»æ‰¾çš„ä¸æ˜¯åŠ›é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯ä»¥ä¿¡ä»»çš„ä¼™ä¼´ã€‚' },
            { id: 'chapter4_start', number: 'ç¬¬å››ç« ', name: 'å› æœçš„å›å“', desc: 'ä¸‰ä¸ªæœˆåçš„æ—¥å¸¸ï¼Œæå…‰å±•çš„é‚€è¯·ã€‚ä½†ç¥ç§˜äººçš„å‡ºç°æ‰“ç ´äº†å¹³é™ï¼Œå›¾ä¹¦é¦†çš„æˆ˜æ–—ä¸­æˆ‘ä»¬ç¬¬ä¸€æ¬¡å¹¶è‚©ä½œæˆ˜ã€‚' },
            { id: 'chapter5_start', number: 'ç¬¬äº”ç« ', name: 'å‘½è¿çš„äº¤ç»‡', desc: 'å¾€æ˜”.çš„å®¶æ—ç§˜å¯†ã€é»‘è¡£äººçš„è¢­å‡»ã€ç¥ç§˜äººçš„çœŸå®èº«ä»½ã€‚å½“å¾€æ˜”.è¢«æŒŸæŒï¼Œæˆ‘å¿…é¡»åšå‡ºæŠ‰æ‹©ã€‚' },
            { id: 'chapter6_start', number: 'ç¬¬å…­ç« ', name: 'è£‚ç¼ä¸­çš„è§‚å¯Ÿè€…', desc: 'ç¥ç§˜çš„è½¬å­¦ç”Ÿæ—é»˜ç°èº«ï¼Œä»–è‡ªç§°"è£‚ç¼çš„è§‚å¯Ÿè€…"ã€‚å…³äºçˆ·çˆ·ã€å› æœä¹‹æ ¸ã€ä»¥åŠå®ˆé—¨äººçš„çœŸç›¸é€æ¸æµ®å‡ºæ°´é¢ã€‚' },
            { id: 'chapter7_start', number: 'ç¬¬ä¸ƒç« ', name: 'å®ˆé—¨äººçš„çœŸç›¸', desc: 'ä¸‰åå¹´å‰çš„å°å°ä¹‹æˆ˜ï¼Œçˆ·çˆ·çš„ç‰ºç‰²ï¼Œæ—é»˜çš„è¿‡å»ã€‚æˆ´ä¸Š"å…±é¸£ä¹‹æˆ’"ï¼Œæˆ‘ä»¬çš„çµé­‚çœŸæ­£è¿æ¥åœ¨ä¸€èµ·ã€‚' },
            { id: 'chapter7_climax', number: 'ç¬¬ä¸ƒç« ', name: 'å…±é¸£ä¹‹åŠ›', desc: 'ã€ç¬¬ä¸ƒç« Â·å®Œç»“ã€‘è™šç©ºä¸å…‰æ˜æœ¬æ˜¯ä¸€ä½“ã€‚æœˆåœ†ä¹‹å¤œçš„çº¦å®šï¼Œå°†æ˜¯æœ€åçš„å¹³é™æ—¶å…‰ã€‚' },
            { id: 'chapter8_start', number: 'ç¬¬å…«ç« ', name: 'è™šç©ºè¯•ç‚¼', desc: 'è™šç©ºä¹‹çœ¼çš„ä¸‰é‡è¯•ç‚¼ï¼šé¢å¯¹ææƒ§ã€å¦è¯šç§˜å¯†ã€åšå‡ºé€‰æ‹©ã€‚åªæœ‰çˆ±ä¸å¸Œæœ›ï¼Œæ‰èƒ½é‡æ–°å°å°è£‚ç¼ã€‚' },
            { id: 'chapter8_climax', number: 'ç¬¬å…«ç« ', name: 'æ–°çš„å°å°', desc: 'ã€ç¬¬å…«ç« Â·å®Œç»“ã€‘æˆ‘ä»¬è¯æ˜äº†ï¼Œå°å°ä¸åº”è¯¥æ˜¯ç—›è‹¦çš„ç‰ºç‰²ï¼Œè€Œæ˜¯å¸Œæœ›çš„å¼€å§‹ã€‚è™šç©ºä¸ç°å®çš„å¹³è¡¡ï¼Œé‡æ–°å»ºç«‹ã€‚' },
            { id: 'epilogue', number: 'å°¾å£°', name: 'æ–°çš„å¼€å§‹', desc: 'ã€æ•…äº‹å®Œç»“ã€‘æ›¾ç»ï¼Œæˆ‘ä»¬æ˜¯ä¸¤åº§è¢«é—å¿˜çš„å­¤å²›ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å½¼æ­¤è¿æ¥ï¼Œæˆä¸ºäº†å½¼æ­¤çš„å…‰ã€‚æ„Ÿè°¢æ¸¸ç©ï¼' }
        ];

        // è·å–å·²è§£é”çš„ç« èŠ‚
        function getUnlockedChapters() {
            try {
                const unlocked = localStorage.getItem('qianshenwanwang_unlocked_chapters');
                return unlocked ? JSON.parse(unlocked) : [];
            } catch (e) {
                console.error('Failed to load unlocked chapters:', e);
                return [];
            }
        }

        // æ¸²æŸ“ç« èŠ‚åˆ—è¡¨
        function renderChapters() {
            const grid = document.getElementById('chapters-grid');
            const unlockedChapters = getUnlockedChapters();
            
            if (unlockedChapters.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">ğŸ“–</div>
                        <div class="empty-state-text">æš‚æ— å·²è§£é”ç« èŠ‚</div>
                        <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.6;">å¼€å§‹æ¸¸æˆåï¼Œç« èŠ‚å°†è‡ªåŠ¨è§£é”</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = CHAPTERS.map(chapter => {
                const isUnlocked = unlockedChapters.includes(chapter.id);
                const progress = isUnlocked ? 100 : 0;
                
                return `
                    <div class="chapter-card ${isUnlocked ? '' : 'locked'}" 
                         onclick="${isUnlocked ? `playChapter('${chapter.id}')` : ''}">
                        <div class="chapter-number">${chapter.number}</div>
                        <div class="chapter-status ${isUnlocked ? 'unlocked' : 'locked'}">
                            ${isUnlocked ? 'å·²è§£é”' : 'æœªè§£é”'}
                        </div>
                        <h2 class="chapter-name">${chapter.name}</h2>
                        <p class="chapter-desc">${chapter.desc}</p>
                        <div class="progress-info">
                            <span class="progress-text">${isUnlocked ? 'ç‚¹å‡»å¼€å§‹å›çœ‹' : 'é€šå…³åè§£é”'}</span>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // æ’­æ”¾ç« èŠ‚
        function playChapter(chapterId) {
            // ä¿å­˜è¦è·³è½¬çš„ç« èŠ‚åˆ° sessionStorage
            sessionStorage.setItem('qianshenwanwang_jump_chapter', chapterId);
            // è·³è½¬åˆ°ä¸»æ¸¸æˆé¡µé¢
            window.location.href = 'index.html?mode=chapter';
        }

        // è¿”å›ä¸»èœå•
        function goBack() {
            window.location.href = 'index.html';
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            renderChapters();
        });
    </script>
</body>

</html>
